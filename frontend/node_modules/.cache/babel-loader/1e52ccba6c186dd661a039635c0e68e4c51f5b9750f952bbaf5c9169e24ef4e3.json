{"ast":null,"code":"var _jsxFileName = \"/Users/samfriedman/Documents/all_sloper_items/sloper_react_ui/frontend/src/components/Visualization/GraphMetricsD3.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useReducer, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GraphMetricsD3 = ({\n  stockMetrics\n}) => {\n  _s();\n  const ref = useRef();\n  const stockSymbol = stockMetrics[\"stockSymbol\"];\n  const metrics = stockMetrics[\"metrics\"];\n  const stockData = metrics.map((metric, i) => {\n    return {\n      date: new Date(metric[i][\"Date\"]),\n      close: parseFloat(metric[i][\"Close\"]),\n      open: parseFloat(metric[i][\"open\"]),\n      high: parseFloat(metric[i][\"high\"]),\n      low: parseFloat(metric[i][\"low\"]),\n      volume: parseFloat(metric[i][\"volume\"])\n    };\n  }).slice(1000, 1100);\n  const dates = stockData.map(data => data[\"date\"]);\n  const closingPrices = stockData.map(data => data[\"close\"]);\n  const xDomain = d3.extent(dates);\n  const yDomain = d3.extent(closingPrices);\n  useEffect(() => {\n    // set up svg\n    const w = 1100;\n    const h = 400;\n    const svg = d3.select(ref.current)\n    //responsive SVG needs these 2 attributes and no width and height attr\n    .attr(\"preserveAspectRatio\", \"xMinYMin meet\").attr(\"viewBox\", \"0 0 1100 400\")\n    //class to make it responsive\n    .classed(\"svg-content-responsive\", true);\n\n    // define scaling\n    const xScale = d3.scaleTime().domain(xDomain).range([0, w]);\n    const yScale = d3.scaleLinear().domain(yDomain).range([h, 0]); // starts in top left to bottom left\n\n    const generateScaledLine = d3.line().x((d, i) => xScale(i)).y(yScale).curve(d3.curveCardinal);\n\n    // set axes\n    const xAxis = d3.axisBottom(xScale).ticks(20);\n    // .tickFormat(dates)\n    const yAxis = d3.axisLeft(yScale).ticks(20);\n    // .tickFormat(closingPrices)\n\n    svg.append('g').call(xAxis).attr('transform', `translate(0, ${h})`).selectAll('text').style('text-anchor', 'end').attr('dx', '-.8em').attr('dy', '.15em').attr('transform', \"rotate(-75)\");\n    svg.append('g').call(yAxis);\n\n    // set data\n    svg.selectAll('.line').data([stockData.map(data => data[\"close\"])]).join('path').attr('d', d => generateScaledLine(d)).attr('fill', 'none').attr('stroke', 'white');\n  }, []);\n  const createGraph = () => {\n    const outputSvg = /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: ref,\n      className: \"d3Svg\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 23\n    }, this);\n    return outputSvg;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d3Container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: stockSymbol\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), createGraph()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s(GraphMetricsD3, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c = GraphMetricsD3;\nexport default GraphMetricsD3;\nvar _c;\n$RefreshReg$(_c, \"GraphMetricsD3\");","map":{"version":3,"names":["React","useRef","useEffect","useReducer","useState","d3","jsxDEV","_jsxDEV","GraphMetricsD3","stockMetrics","_s","ref","stockSymbol","metrics","stockData","map","metric","i","date","Date","close","parseFloat","open","high","low","volume","slice","dates","data","closingPrices","xDomain","extent","yDomain","w","h","svg","select","current","attr","classed","xScale","scaleTime","domain","range","yScale","scaleLinear","generateScaledLine","line","x","d","y","curve","curveCardinal","xAxis","axisBottom","ticks","yAxis","axisLeft","append","call","selectAll","style","join","createGraph","outputSvg","className","fileName","_jsxFileName","lineNumber","columnNumber","children","_c","$RefreshReg$"],"sources":["/Users/samfriedman/Documents/all_sloper_items/sloper_react_ui/frontend/src/components/Visualization/GraphMetricsD3.js"],"sourcesContent":["import React, { useRef, useEffect, useReducer, useState } from \"react\";\nimport * as d3 from \"d3\";\n\nconst GraphMetricsD3 = ({ stockMetrics }) => {\n  const ref = useRef()\n\n  const stockSymbol = stockMetrics[\"stockSymbol\"]\n  const metrics = stockMetrics[\"metrics\"]\n  const stockData = metrics.map((metric, i) => {\n    return {\n      date: new Date(metric[i][\"Date\"]),\n      close: parseFloat(metric[i][\"Close\"]),\n      open: parseFloat(metric[i][\"open\"]),\n      high: parseFloat(metric[i][\"high\"]),\n      low: parseFloat(metric[i][\"low\"]),\n      volume: parseFloat(metric[i][\"volume\"]),\n    }\n  }).slice(1000, 1100)\n\n  const dates = stockData.map(data => data[\"date\"])\n  const closingPrices = stockData.map(data => data[\"close\"])\n\n  const xDomain = d3.extent(dates)\n  const yDomain = d3.extent(closingPrices)\n\n  useEffect(() => {\n    // set up svg\n    const w = 1100\n    const h = 400\n    const svg = d3.select(ref.current)\n      //responsive SVG needs these 2 attributes and no width and height attr\n      .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n      .attr(\"viewBox\", \"0 0 1100 400\")\n      //class to make it responsive\n      .classed(\"svg-content-responsive\", true);\n\n    // define scaling\n    const xScale = d3.scaleTime()\n      .domain(xDomain)\n      .range([0, w]);\n    const yScale = d3.scaleLinear()\n      .domain(yDomain)\n      .range([h, 0])      // starts in top left to bottom left\n\n    const generateScaledLine = d3.line()\n      .x((d, i) => xScale(i))\n      .y(yScale)\n      .curve(d3.curveCardinal)\n\n    // set axes\n    const xAxis = d3.axisBottom(xScale)\n      .ticks(20)\n      // .tickFormat(dates)\n    const yAxis = d3.axisLeft(yScale)\n      .ticks(20)\n      // .tickFormat(closingPrices)\n\n    svg.append('g')\n      .call(xAxis)\n      .attr('transform', `translate(0, ${h})`)\n      .selectAll('text').style('text-anchor', 'end').attr('dx', '-.8em').attr('dy', '.15em').attr('transform', \"rotate(-75)\")\n    svg.append('g')\n      .call(yAxis)\n\n    // set data\n    svg.selectAll('.line')\n      .data([stockData.map(data => data[\"close\"])])\n      .join('path')\n      .attr('d', d => generateScaledLine(d))\n      .attr('fill', 'none')\n      .attr('stroke', 'white')\n\n  }, [])\n\n\n\n\n  const createGraph = () => {\n    const outputSvg = <svg ref={ref} className=\"d3Svg\" />\n\n    return outputSvg\n\n  }\n\n\n\n  return (\n    <div className=\"d3Container\">\n      <h1>{stockSymbol}</h1>\n      {createGraph()}\n    </div>\n  )\n}\n\nexport default GraphMetricsD3;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}